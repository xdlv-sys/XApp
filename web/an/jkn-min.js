var app=angular.module("interfaceTest",["angular-md5"]).config(["$httpProvider",function(a){a.defaults.transformRequest=function(c){var d=[];for(var b in c){d.push(encodeURIComponent(b)+"="+encodeURIComponent(c[b]))}return d.join("&")};a.defaults.headers.post={"Content-Type":"application/x-www-form-urlencoded"}}]).controller("interfaceCtrl",["$scope","md5",function(a,b){}]).directive("inputForm",["$http","md5","$rootScope",function(c,b,a){return{templateUrl:"inputForm.html",replace:true,scope:{},link:function(m,e,l){m.signKey="jkn@igecono.com0516";m.inputs=[];m.conf=[];m.resultKey=l.result;m.getHttpParams=function(){var i={};angular.forEach(m.inputs,function(o,p,n){if(m.conf[p]){i[o.name]=m.conf[p]}});return i};m.change=function(){var i=m.getHttpParams();var p="";var o=[];for(var n in i){if(n!="sign"){o.push(n)}}o=o.sort();angular.forEach(o,function(q,r){p+=(q+"="+i[q]+"&")});p+="key="+m.signKey;m.currentSign=p;angular.forEach(m.inputs,function(r,s,q){if(r.name==="sign"){m.conf[s]=b.createHash(p)}})};m.submitForm=function(){var i=m.getHttpParams();c.post(m.action,i).success(function(n){if(l.result){m.result=n[m.resultKey]}alert((n.code===200?"OK:":"Fail:")+n.code)})};m.action=l.action;var d=window.location.href;d=d.substring(0,d.lastIndexOf("/"));m.url=d+"/"+m.action;m.title=l.title;var f=l.params.split("-");for(var g=0;g<f.length;g+=2){var h="";var k=f[g+1];var j=f[g+1].indexOf("(");if(j>-1){k=f[g+1].substring(0,j);h=f[g+1].substring(j,f[g+1].length-1)}m.inputs.push({label:k,name:f[g],comment:h})}m.inputs.push({label:"Sign",name:"sign",comment:"key:"+m.signKey})}}}]);