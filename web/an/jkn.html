<!DOCTYPE html>
<html lang="en">
<head>
    <meta http-equiv="Access-Control-Allow-Origin" content="*">
    <meta charset="UTF-8">
    <title>接口测试</title>
    <script src="http://apps.bdimg.com/libs/angular.js/1.4.6/angular.min.js"></script>
</head>

<style>
    .title {
        margin: 0 auto;
        font-weight: bold;
        font-size: 24px;
        color: #b30000;
        width: 200px;
        padding: 20px;
    }
    .url {
        margin-left: 20px;
        font-weight: bold;
        font-size: 23px;
        color: #0a50ba;
        width: 600px;
        padding: 20px;
    }

    form {
        border: 1px solid #b30000;
        padding: 10px;
        width: 800px;
        margin-left: auto;
        margin-right: auto;
        margin-top: 20px;
    }

    .test_input {
        margin: 10px;
    }

    .input_v {
        margin-left: 10px;
        width: 90%;
        line-height: 26px;
    }

</style>
<body ng-app="interfaceTest" ng-controller="interfaceCtrl">

<input-form action="syncUser.cmd"
            title="用户同步syncUser"
            params="jknUser.userId-用户ID
                -jknUser.userName-用户名
                -jknUser.referrer-推荐人ID
                -jknUser.telephone-手机号码">
</input-form>

<input-form action="addTrade.cmd"
            title="新增交易addTrade"
            params="order.orderId-交易ID
                -order.userId-用户ID
                -order.payType-支付类型(0 微信,1 支付宝,2银行卡,3余额支付)
                -order.tradeType-交易类型(0:消费；1:提现)
                -order.totalFee-金额
                -order.balanceFee-余额消费
                -order.lastUpdateS-交易时间">
</input-form>

</body>
<script src="jkn.js">
</script>
<script language="javascript">
    var app=angular.module("interfaceTest",[]);app.directive("inputForm",["$http",function(a){return{templateUrl:"inputForm.html",replace:true,scope:true,link:function(k,c,j){k.submitForm=function(){var l=c[0];var i={};angular.forEach(k.inputs,function(n,o,m){i[n.name]=l[n.name].value});a.post(k.action,i).success(function(m){alert(m.code===200?("OK:"):("Fail:"+m.code))})};k.action=j.action;var b=window.location.href;b=b.substring(0,b.lastIndexOf("/"));k.url=b+"/"+k.action;k.title=j.title;k.inputs=[];var d=j.params.split("-");for(var e=0;e<d.length;e+=2){var f="";var h=d[e+1];var g=d[e+1].indexOf("(");if(g>-1){h=d[e+1].substring(0,g);f=d[e+1].substring(g,d[e+1].length-1)}k.inputs.push({label:h,name:d[e],comment:f})}}}}]);app.config(["$httpProvider",function(a){a.defaults.transformRequest=function(c){var d=[];for(var b in c){d.push(encodeURIComponent(b)+"="+encodeURIComponent(c[b]))}return d.join("&")};a.defaults.headers.post={"Content-Type":"application/x-www-form-urlencoded"}}]);app.controller("interfaceCtrl",["$scope",function(a){a.submitForm=function(b){}}]);
</script>
</html>