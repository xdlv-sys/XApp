<!DOCTYPE html>
<html lang="en">
<head>
    <meta http-equiv="Access-Control-Allow-Origin" content="*">
    <meta charset="UTF-8">
    <title>接口测试</title>
    <script src="http://apps.bdimg.com/libs/angular.js/1.4.6/angular.min.js"></script>
    <script src="//cdn.bootcss.com/angular-md5/0.1.10/angular-md5.min.js"></script>
</head>

<style>
    .title {
        margin: 0 auto;
        font-weight: bold;
        font-size: 24px;
        color: #b30000;
        width: 200px;
        padding: 20px;
    }
    .url {
        margin-left: 20px;
        font-weight: bold;
        font-size: 23px;
        color: #0a50ba;
        width: 600px;
        padding: 20px;
    }

    form {
        border: 1px solid #b30000;
        padding: 10px;
        width: 800px;
        margin-left: auto;
        margin-right: auto;
        margin-top: 20px;
    }
    .current_sign{
        width: 800px;
        height: 60px;
        margin-bottom: 20px;
        overflow: scroll;
    }

    .test_input {
        margin: 10px;
    }

    .input_v {
        margin-left: 10px;
        width: 90%;
        line-height: 26px;
    }

</style>
<body ng-app="interfaceTest" ng-controller="interfaceCtrl">

<input-form action="syncUser.cmd"
            title="用户同步syncUser"
            params="jknUser.userId-用户ID
                -jknUser.userName-用户名
                -jknUser.referrer-推荐人ID
                -jknUser.telephone-手机号码">
</input-form>

<input-form action="addTrade.cmd"
            title="新增交易addTrade"
            params="order.orderId-交易ID
                -order.userId-用户ID
                -order.payType-支付类型(0 微信,1 支付宝,2银行卡,3余额支付)
                -order.tradeType-交易类型(0:消费；1:提现)
                -order.totalFee-金额
                -order.balanceFee-余额消费
                -order.lastUpdateS-交易时间">
</input-form>

<input-form action="userDetail.cmd"
            title="用户详情userDetail"
            params="jknUser.userId-用户ID
            -start-开始记录
            -limit-记录条数">
</input-form>
<input-form action="settlementDetail.cmd"
            title="佣金详情"
            params="jknUser.userId-用户ID
            -start-开始记录
            -limit-记录条数">
</input-form>


</body>
<script src="jkn.js">
</script>
<script language="javascript">
    if (!app){
        var app=angular.module("interfaceTest",["angular-md5"]).config(["$httpProvider",function(d){d.defaults.transformRequest=function(d){var e=[],a;for(a in d)e.push(encodeURIComponent(a)+"="+encodeURIComponent(d[a]));return e.join("&")};d.defaults.headers.post={"Content-Type":"application/x-www-form-urlencoded"}}]).controller("interfaceCtrl",["$scope","md5",function(d,g){}]).directive("inputForm",["$http","md5","$rootScope",function(d,g,e){return{templateUrl:"inputForm.html",replace:!0,scope:{},link:function(a,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      b,c){a.signKey="jkn@igecono.com0516";a.inputs=[];a.conf=[];a.getHttpParams=function(){var b={};angular.forEach(a.inputs,function(c,d,e){a.conf[d]&&(b[c.name]=a.conf[d])});return b};a.change=function(){var b=a.getHttpParams(),c="",d=[],e;for(e in b)"sign"!=e&&d.push(e);d=d.sort();angular.forEach(d,function(a,d){c+=a+"="+b[a]+"&"});c+="key="+a.signKey;a.currentSign=c;angular.forEach(a.inputs,function(b,d,e){"sign"===b.name&&(a.conf[d]=g.createHash(c))})};a.submitForm=function(){var b=a.getHttpParams();
            d.post(a.action,b).success(function(a){alert((200===a.code?"OK:":"Fail:")+a.code)})};a.action=c.action;b=window.location.href;b=b.substring(0,b.lastIndexOf("/"));a.url=b+"/"+a.action;a.title=c.title;c=c.params.split("-");for(b=0;b<c.length;b+=2){var e="",h=c[b+1],f=c[b+1].indexOf("(");-1<f&&(h=c[b+1].substring(0,f),e=c[b+1].substring(f,c[b+1].length-1));a.inputs.push({label:h,name:c[b],comment:e})}a.inputs.push({label:"Sign",name:"sign",comment:"key:"+a.signKey})}}}]);}

</script>
</html>