function carParkInfo(b){this.price=-1;if(!b){return}var d=this;angular.forEach(b,function(e,f){d[f]=e});var a=this.consumedTime/60|0;var c=this.consumedTime%60;this.consumedTimeValue=""+a+"小时"+c+"分钟";this.payTypes=[];if(this.wxPay){this.payTypes.push({type:"wx",name:"微信支付"})}if(this.aliPay){this.payTypes.push({type:"ali",name:"支付宝"})}if(this.payTypes.length>0){this.selectedPay=this.payTypes[0]}}function payPara(a){this["carParkInfo.parkId"]=a.parkId;if(a.watchId){this.watchId=a.watchId}if(a.openId){this.openid=a.openId}this.setCarNumber=function(b){this["carParkInfo.carNumber"]=b}}function carInfo(a){this.carProvince="苏";this.carCity="A";this.carNum="";this.getCarNumber=function(){return this.carProvince+this.carCity+this.carNum};if(a){this.carProvince=a.substring(0,1);this.carCity=a.substring(1,2);this.carNum=a.substring(2)}}function fillPayOrder(b){var a=angular.copy(b);a.title="支付失败";a.titleColor="red";if(b.payStatus===1){a.title="支付成功";a.titleColor="green";localStorage.setItem("carNumber",b.carNumber)}return a}function showPayResult(a,b){if(b.notifyStatus!==0){showResultDialog(a,b);return}a.wait("正在通知出口岗亭...");a.interval(function(c){a.post("pay!queryNotifyStatus.cmd",{"payOrder.outTradeNo":b.outTradeNo},function(d){var e=d.payOrder;if(e&&e.notifyStatus!=0){c();a.closeWait();showResultDialog(a,e)}},{tip:false})},1000,15).then(function(){a.closeWait();a.info("通知岗亭失败，请联系工作人员 ")})}function showResultDialog(a,b){a.open({tid:"payResult.html",cancelAction:function(){if(b.notifyStatus===1){return}a.post("refund!refund.cmd",{outTradeNo:b.outTradeNo},function(c){a.info("退款申请成功，欢迎再次使用")})}},fillPayOrder(b))};